<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>05-07 :: Send a form using Ajax :: MooTools Recipes `(>>)^</title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />
  <script type="text/javascript" src="mootools-1.3.0.js"></script>
</head>
<body>

  <div id="error"></div>
  <form id="my_form" action="05_form_processor.php" method="post">
    Your name: <input type="text" name="name" value=""/><br/>
    Send an error? <input type="checkbox" name="error" value="1"/><br/>
    <input type="submit" value="Submit Form!"/>
  </form>

  <noscript>JavaScript is disabled.</noscript>
  <script type="text/javascript">
 
  $('my_form').set('send', {
    onComplete: function(response) {
      var error_test = response.substr(0,5);
      if (error_test.test('error','i')) {
        $('error').set('html',response);
      } else {
        $('my_form').set('html',response);
      }
    }
  });

  // bind a function to the submit event
  $('my_form').addEvent('submit',function(e) {

    // MooTools class and method to extend HTML events
    var event = new Event(e);
    e.stop();  
     
    $('my_form').send(); 

  }); 
  </script>
</body>
</html>

